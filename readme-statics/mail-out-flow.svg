<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1562.5 776.6484375">
  <!-- svg-source:excalidraw -->
  <defs>
    <style>
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/FG_Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
    </style>
  </defs>
  <rect x="0" y="0" width="1562.5" height="776.6484375" fill="#f4fce3"></rect><g transform="translate(11.875 52.5703125) rotate(0 103.095703125 38.39453125)"><path d="M2.2042585180595675 -0.8750966216218987 C50.608868286249496 -0.682351956645709, 100.71801163968728 1.448736593701451, 208.07540431608626 -1.5366190750315993 M1.2851925387113539 0.1648677295177946 C72.77502399369011 -0.3177374126247243, 143.37514868130611 -0.47268377426997343, 207.33955176052947 0.236134330726399 M209.37377911433578 0.3205343522131443 C205.38629916414777 21.431188770899464, 208.1212636540846 48.76364876209555, 208.95184152945876 77.76043725386262 M205.78398323245347 1.2835200112313032 C207.45783832747563 26.881671157324305, 204.8855554767333 49.6155931011468, 206.6334798950702 76.1259836833924 M202.79750849987462 74.4271533228087 C138.1903567552342 74.64736359347687, 69.67418589315722 74.74846024299609, 2.701509985495431 79.4288207249596 M205.70259883354572 75.19469377236784 C163.1654719781849 79.89821054895218, 120.4064219803173 80.34476426007589, -1.3794832617527606 76.58740618249001 M0.0019784532487392426 76.29097926989198 C-2.6970153836083774 56.302248858470556, -0.7760996607613924 43.5521697226839, 1.8019570671021938 -1.7304139100015163 M-1.7150205355137587 75.03279271535575 C-2.337011617394892 54.560131916232784, -3.1341670572485603 33.587865938276806, 1.0653271097689867 0.40491565875709057" stroke="#c92a2a" stroke-width="1" fill="none"></path></g><g><g transform="translate(225.21484375 90.94921875) rotate(0 51.807833741940556 -0.5749821577221184)"><path d="M1.1093377623707057 1.6431273963302369 C18.333422898625333 0.941505168502529, 88.3641858531783 -2.694186438495914, 105.34864200688898 -2.7930917117744682 M-1.73297452300787 0.06679988712072404 C15.172219247718653 -0.5332610812783238, 87.34210158656042 -0.017153684198856323, 104.5234449544549 -0.680009757578373" stroke="#c92a2a" stroke-width="1" fill="none"></path></g><g transform="translate(225.21484375 90.94921875) rotate(0 51.807833741940556 -0.5749821577221184)"><path d="M78.80987916157989 13.648590959263052 C82.79181196510437 6.151328640195878, 98.7082650471007 3.3427821756091456, 107.45692438647151 1.3056531162559986 M77.35851544344274 10.870552761134709 C87.58011339659697 6.256981025033896, 95.10071926327845 4.147479771346142, 106.36333498559893 0.6516835955530405" stroke="#c92a2a" stroke-width="1" fill="none"></path></g><g transform="translate(225.21484375 90.94921875) rotate(0 51.807833741940556 -0.5749821577221184)"><path d="M78.5544702727952 -6.871028157215923 C82.83894225573611 -6.745713965621072, 98.85029918008402 -1.92966010008025, 107.45692438647151 1.3056531162559986 M77.10310655465805 -9.649066355344265 C87.38362481952744 -7.117267172923798, 94.99319332385654 -2.079486087250661, 106.36333498559893 0.6516835955530405" stroke="#c92a2a" stroke-width="1" fill="none"></path></g></g><g transform="translate(347.705078125 49.23046875) rotate(0 108.28515625 45.435546875)"><path d="M1.639831042560038 2.316986265593438 C63.79078345178449 -3.307265567087625, 129.94421967132848 1.5173685675675233, 218.89373015311028 -3.193081287258363 M-1.4903447842694162 0.906329043517432 C72.51359981241278 -1.6370193582011725, 146.0085006197726 0.6698414463644775, 215.87153839335969 1.6828920041868476 M213.0749610699713 3.8911210857331753 C213.27258385331126 37.131187566294464, 218.42237926632853 64.51742943137724, 213.2078189887106 91.94681030139326 M216.6460012476891 1.5715397018939257 C217.23126031641738 24.016934597584985, 218.2182036209561 43.27879868578093, 218.12154063396153 90.20434820838271 M218.79388180459685 90.27462744531547 C159.38810840457145 88.54923445057489, 94.81934509770636 88.98859486691008, -2.3935204224493507 87.89041957239148 M215.71374906775944 89.81642577932712 C136.4749848881032 87.3830124381451, 55.474338551721516 87.09217371951276, -0.5767802892427724 91.17926504963837 M1.1352955140173435 92.7208508811891 C1.7783053586050663 61.605272858176235, 2.681724734024683 33.49793076655987, -2.0100371800363064 -2.504717532545328 M-1.3888065535575151 91.78994697518645 C3.450430972581889 68.21714705380181, 0.5391389560756941 40.75048917648454, -0.27594188041985035 0.009490253403782845" stroke="#c92a2a" stroke-width="1" fill="none"></path></g><g transform="translate(361.740234375 61.18359375) rotate(0 95.400390625 34.4820689006024)"><text x="0" y="15.988045933734938" font-family="Virgil, Segoe UI Emoji" font-size="18.390436746987962px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">Fetch all users with</text><text x="0" y="38.976091867469876" font-family="Virgil, Segoe UI Emoji" font-size="18.390436746987962px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">the right subscription</text><text x="0" y="61.964137801204814" font-family="Virgil, Segoe UI Emoji" font-size="18.390436746987962px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">status</text></g><g transform="translate(631.83203125 36.443359375) rotate(0 76.072265625 54.041015625)"><path d="M-0.7281457148492336 3.6781985126435757 C40.81339693498265 -1.482252985624001, 84.2596064854493 3.2282097037757183, 154.16263151541347 -0.2820882238447666 M-1.1317323166877031 -1.8506588321179152 C41.90193261886196 2.9014968922660764, 86.83735956307862 1.094730322651666, 150.44397339038545 0.37155854888260365 M155.28462458029384 -0.5548533834517002 C152.2382275588662 27.653289733266508, 150.14253575874872 56.2516267891937, 151.67711460962886 105.41338389739394 M152.21864732913667 1.6572560090571642 C152.43611041049897 26.011674066081834, 151.1370143626207 51.62012235076764, 152.24427178315813 106.65730732865632 M153.2706347741186 106.22524398192763 C115.97698039675193 111.50018914376233, 76.62046362314501 113.4075893941972, 2.9720885790884495 109.76983242854476 M152.16623881272966 107.92779177613556 C105.77544823593739 109.6657521295295, 60.51823119124961 111.11104168174126, 0.09655496291816235 108.8866462726146 M-3.3466532193124294 105.78448181971908 C-1.2941576427492691 74.29854623268075, -2.731196183589418 44.9008026317264, 3.232734087854624 -0.692845169454813 M1.771772114560008 109.29377317614853 C-1.3054311352871446 65.07436610345431, 0.29667597235216814 22.043193359983704, 0.4580372851341963 1.917790712788701" stroke="#c92a2a" stroke-width="1" fill="none"></path></g><g transform="translate(626.443359375 48.90234375) rotate(0 76 40)"><text x="76" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="middle" style="white-space: pre;" direction="ltr">For each user:</text><text x="76" y="34" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="middle" style="white-space: pre;" direction="ltr">Fetch all their links</text><text x="76" y="54" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="middle" style="white-space: pre;" direction="ltr">that are overdue</text><text x="76" y="74" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="middle" style="white-space: pre;" direction="ltr">&amp; UNSENT</text></g><g><g transform="translate(795.4028301153332 90.29687224887311) rotate(0 54.49688785411422 -1.314372195638711)"><path d="M-2.6245136346668003 0.9023409988731146 C16.209176446373263 0.5788991338262954, 92.31770562070112 0.6812981134901444, 111.61828934289515 0.5808083917945623 M1.1462261787056924 -1.0761276975274088 C19.741348812878133 -0.9954639763633413, 90.91450968533755 -2.963031154771646, 109.43584539324046 -3.5310853901505475" stroke="#c92a2a" stroke-width="1" fill="none"></path></g><g transform="translate(795.4028301153332 90.29687224887311) rotate(0 54.49688785411422 -1.314372195638711)"><path d="M82.83660509094265 7.671484291473069 C90.70177216989346 7.653400337020084, 97.28792314567379 -0.45371929550093437, 105.65547611519695 -5.736505828350783 M82.92656020663348 5.8948738034010315 C88.00430335480756 3.856508648407865, 96.70795930309845 1.04313684743469, 109.35894857488573 -3.4174041911214594" stroke="#c92a2a" stroke-width="1" fill="none"></path></g><g transform="translate(795.4028301153332 90.29687224887311) rotate(0 54.49688785411422 -1.314372195638711)"><path d="M82.25434539159843 -12.84146225524126 C90.63486010802043 -7.708563489539987, 97.36691182393754 -10.675615748477078, 105.65547611519695 -5.736505828350783 M82.34430050728926 -14.618072743313297 C87.97841430329174 -11.455699740416588, 96.82981905258083 -9.063897182541304, 109.35894857488573 -3.4174041911214594" stroke="#c92a2a" stroke-width="1" fill="none"></path></g></g><g transform="translate(902.8203125 22.55078125) rotate(0 87.71484375 74.22265625)"><path d="M2.013755325227976 -2.0166959203779697 C40.94935026708481 3.0440218100753555, 92.01190214863891 3.618669832727028, 172.52004540339112 -3.3336454071104527 M-0.721120985224843 -1.2310777883976698 C58.30136843448782 -0.8461917823493419, 120.80881078083623 -1.2474350517928539, 176.51005461625755 -1.5989311318844557 M173.94437611475587 -1.4658771194517612 C177.1289955523041 61.50543925472812, 176.2331442978409 117.21301890405448, 178.44810653105378 146.55036049708724 M175.48731949739158 1.9541460890322924 C178.10208156038877 47.62368652836376, 178.98800786663648 95.57051158988762, 176.59340163879097 150.0905060786754 M176.2648627795279 151.19123059138656 C126.56314644436861 145.2251339109651, 88.40367025203157 144.54383863527693, -3.672809239476919 146.27051370963454 M175.4840728919953 149.68256950564682 C138.71537280241682 146.5885838100534, 103.15953091291158 147.89044646712355, -1.3633686024695635 149.27950269170105 M0.9963334836065769 146.45889967307448 C-0.31332923165420645 108.40244001052997, -1.9843651174650585 71.27242917000694, -0.8645524941384792 3.186555441468954 M-0.12520894594490528 148.48428279347718 C-1.3350218980746282 97.02532604260414, -1.836832865996839 41.344264265485975, -1.1003073770552874 -0.9373978357762098" stroke="#c92a2a" stroke-width="1" fill="none"></path></g><g><g transform="translate(1054.4375 178.87499999999994) rotate(0 -115.32629828050722 61.104709087610246)"><path d="M-0.6607623670250176 1.9397813353687523 C-40.262236607136806 21.622276522889734, -196.1374987948064 99.15670735177895, -234.8286104097961 118.82014647342265 M4.1760138487815865 0.5244945359230044 C-34.828553841399625 20.49639475544294, -189.90356112861372 101.29512547055882, -229.7377064555137 121.6849236392975" stroke="#c92a2a" stroke-width="1" fill="none"></path></g><g transform="translate(1054.4375 178.87499999999994) rotate(0 -115.32629828050722 61.104709087610246)"><path d="M-206.63549059937336 96.17463131780718 C-219.4224135824382 107.7745248856691, -225.968688189346 117.60221553099531, -230.56938645906732 119.65947210207582 M-209.72143572317995 98.51756004962121 C-212.71340851028398 103.07568782542286, -219.8121077936301 108.31026434186973, -230.65292313799247 123.26044370584191" stroke="#c92a2a" stroke-width="1" fill="none"></path></g><g transform="translate(1054.4375 178.87499999999994) rotate(0 -115.32629828050722 61.104709087610246)"><path d="M-197.21212907657667 114.40428463312051 C-213.85617118979224 118.68070930349698, -224.16513853262032 121.22940678466014, -230.56938645906732 119.65947210207582 M-200.29807420038327 116.74721336493454 C-205.49880608735612 116.91471597341638, -214.81879116777156 117.85217729409753, -230.65292313799247 123.26044370584191" stroke="#c92a2a" stroke-width="1" fill="none"></path></g></g><g transform="translate(408.046875 308.1328125) rotate(0 216.287109375 177.1796875)"><path d="M-1.5855737180386043 -0.8252449664585113 C121.412751937832 -4.263842343923806, 247.5401820388903 -3.3986899357276656, 431.69175431152524 -1.1656799747487756 M0.534849692159378 0.935718312833278 C140.57195573175454 -0.15073381823475143, 282.2214426302568 0.4075013275884035, 432.1069095965669 0.9629282334886061 M430.7056719641305 0.7538253460799792 C430.397195564243 97.78311505837557, 426.9871323648463 200.49162711851736, 434.3648976117037 353.28120010406076 M431.72365158001406 -0.2608464641672576 C436.3607979637191 74.99193275767082, 436.04519336312086 149.40571369089713, 432.49021425180365 353.4528455421696 M433.33139941571585 353.3197079473527 C295.6522996883089 354.7411950509382, 158.442021440871 357.17493051417193, -0.34621482694723 356.12805175526165 M432.1539051025653 355.29254747570565 C327.9230932473653 357.7984365979901, 223.25769902443795 357.41131108335634, 0.4227732205491177 355.3434577139588 M-2.423277162564569 354.66742569571045 C3.541194993762142 234.95968028731903, 4.616555387139385 114.52012681543808, -0.14483097519483082 1.3071923703226136 M-1.189234108893785 353.7134423381094 C1.3862184676356422 278.11399095717513, -0.5300769869480859 201.06384246830916, 0.22554975184271747 0.38084507481365226" stroke="#c92a2a" stroke-width="1" fill="none"></path></g><g transform="translate(1148.546875 10) rotate(0 201.9765625 89.404296875)"><path d="M-0.7755802171249919 -1.486056640487885 C147.12074727367533 2.125756242042389, 296.0482171655658 0.6186447089735976, 403.5243058731749 -1.0066119738411414 M403.9178103245795 -0.6746972240507603 C406.46639360354857 72.58602946696375, 407.3056574003549 142.90748232374975, 403.634698394686 176.03792863711718 M402.6336124583725 179.6142774982486 C268.95161460535013 184.18154565542895, 134.78003715687782 184.79136826904687, -0.23549908679068174 177.29817992700143 M0.33725786581635475 178.58303457126024 C3.3434955535794875 115.85038671098847, 7.057679241743244 48.95519841492569, -2.5281256400048733 -3.152768675237894" stroke="#5f3dc4" stroke-width="1.5" fill="none" stroke-dasharray="12 8"></path></g><g transform="translate(1166.74609375 23.609375) rotate(0 188 75)"><text x="0" y="18" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#862e9c" text-anchor="start" style="white-space: pre;" direction="ltr">Link has props like tags &amp; CC. </text><text x="0" y="43" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#862e9c" text-anchor="start" style="white-space: pre;" direction="ltr">Future state stuff.</text><text x="0" y="68" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#862e9c" text-anchor="start" style="white-space: pre;" direction="ltr">Tags is from subject line, in case we </text><text x="0" y="93" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#862e9c" text-anchor="start" style="white-space: pre;" direction="ltr">want to tag links</text><text x="0" y="118" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#862e9c" text-anchor="start" style="white-space: pre;" direction="ltr">CC is others that they want the link</text><text x="0" y="143" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#862e9c" text-anchor="start" style="white-space: pre;" direction="ltr">sent to.</text></g><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(10 716.6484375) rotate(0 234.5 12)"><text x="0" y="19" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#495057" text-anchor="start" style="white-space: pre;" direction="ltr">* Data models are in the /db/models file</text></g><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(21.515625 57.15625) rotate(0 65.5 30)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">cron triggers </text><text x="0" y="34" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">email processing </text><text x="0" y="54" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">task</text></g><g><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(572.33984375 93.328125) rotate(0 24.49260677304119 -0.09296829402447315)"><path d="M1.8156868886202568 -0.5781994115561249 C9.711021883413196 -0.3232126366347077, 41.278576917573815 -0.1830128363023204, 49.62839227430523 -0.639808262512088 M-0.6431787282228472 -3.3603900450468065 C6.687296818296114 -2.395830903251966, 38.786786341865856 2.860773831804594, 47.46432304561138 3.174453456997872" stroke="#c92a2a" stroke-width="1" fill="none"></path></g><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(572.33984375 93.328125) rotate(0 24.49260677304119 -0.09296829402447315)"><path d="M22.613933126305906 9.322025426810901 C33.1621747361412 10.010808961622692, 38.47812274841533 0.44337844925500125, 50.45758531793952 2.9376010085642346 M22.62579242219564 9.782097320219796 C30.51664914460149 8.319475235722553, 35.177992614805945 4.811985278549213, 48.31952909745276 4.825781892165542" stroke="#c92a2a" stroke-width="1" fill="none"></path></g><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(572.33984375 93.328125) rotate(0 24.49260677304119 -0.09296829402447315)"><path d="M24.40806224099926 -7.513291245006338 C34.012570264515766 -0.3939689233426993, 38.645699499943966 -3.554129053930259, 50.45758531793952 2.9376010085642346 M24.419921536888996 -7.053219351597443 C32.060283183062964 -3.961496231117798, 36.232930028717085 -2.8832725050486907, 48.31952909745276 4.825781892165542" stroke="#c92a2a" stroke-width="1" fill="none"></path></g></g><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(18.30078125 147.05859375) rotate(0 95.982421875 36.962890625)"><path d="M-1.8280064053833485 0.30280574038624763 C58.31427183256128 -1.3613539411665259, 112.29234642670708 -7.590066619122153, 194.91075728461146 2.1922292299568653 M-0.9602176155894995 1.3354778792709112 C44.51107912569314 2.6178682722770463, 85.31939101895333 -0.48098549464113605, 193.1973141822964 0.5802373792976141 M189.21003268286586 -1.4850216321647167 C187.57995992169708 23.774355882133023, 187.69026248917908 52.72753909101084, 188.40092573687434 72.03936966136096 M191.33953897096217 -0.08698893524706364 C194.37539849475615 17.178715343505242, 195.34713224366897 32.420240163639384, 193.69877097941935 72.32707255147396 M191.85233126208186 74.83547695353626 C127.2668143474486 73.12379943338476, 60.77661527339151 68.63452004400335, 0.04503629729151726 71.87288780882953 M191.33402250148356 75.55329411290585 C132.30211606411723 71.86393194043869, 68.36222966154091 70.08414326751465, -1.1093787755817175 75.10290514491497 M-2.869982738047838 72.9890329428017 C-0.5135533535340076 44.76834613882782, 2.0715493238112686 20.579599795059032, -2.8093768544495106 -3.430141132324934 M0.207864323630929 75.74454723857342 C2.233393397078544 54.0060988228888, -0.8138280847215357 32.03338794077352, -0.524925610050559 1.3158772494643927" stroke="#5f3dc4" stroke-width="1" fill="none"></path></g><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(27.74609375 150.69140625) rotate(0 69.5 40)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#5f3dc4" text-anchor="start" style="white-space: pre;" direction="ltr">db.doEmailTask()</text><text x="0" y="34" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#5f3dc4" text-anchor="start" style="white-space: pre;" direction="ltr">triggered in the </text><text x="0" y="54" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#5f3dc4" text-anchor="start" style="white-space: pre;" direction="ltr">cron/index.ts file</text><text x="0" y="74" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#5f3dc4" text-anchor="start" style="white-space: pre;" direction="ltr"></text></g><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(914 27.36328125) rotate(0 93 70)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">For each link doc </text><text x="0" y="34" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">retrieved:</text><text x="0" y="54" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">change date format</text><text x="0" y="74" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">push into array of links</text><text x="0" y="94" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">and also an array </text><text x="0" y="114" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">of firestore doc refs</text><text x="0" y="134" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr"></text></g><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(454.0991637297948 317.7133564558442) rotate(359.40495271430945 163 160)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">1) Send the links along with </text><text x="0" y="34" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">templating variable data to</text><text x="0" y="54" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">the Mailer class to generate </text><text x="0" y="74" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">the email for that user (containing</text><text x="0" y="94" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">all their links). </text><text x="0" y="114" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr"></text><text x="0" y="134" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">2) Run mail sending in parallel.</text><text x="0" y="154" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">When each resolves, use the link doc</text><text x="0" y="174" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">refs array to update the link records</text><text x="0" y="194" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">to have the outMsgId and change</text><text x="0" y="214" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">to SENT status. </text><text x="0" y="234" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr"></text><text x="0" y="254" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">3) Include the digestId as that is a</text><text x="0" y="274" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">user-referencable uid for that email, diff</text><text x="0" y="294" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">from the outMsgId which is only available</text><text x="0" y="314" font-family="Virgil, Segoe UI Emoji" font-size="16.055469857000332px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr">after the email is sent.</text></g><g transform="translate(1384.5 756.6484375) rotate(0 84 10)"><text x="168" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#adb5bd" text-anchor="end" style="white-space: pre;" direction="ltr">Made with Excalidraw</text></g></svg>